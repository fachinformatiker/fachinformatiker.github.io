<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>How to Install Xrdp Server (Remote Desktop) - fachinformatiker.app</title><meta name="description" content="Neues zum Thema Technik, Medien, etc.
Gerne bringe ich dir auch in meinen Tutorials, schriftlich wie auch audiovisuell, neues bei und erweitere dein Wissen."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-install-xrdp-server-remote-desktop.html"><link rel="amphtml" href="https://fachinformatiker.github.io/fachinformatiker.github.io/amp/how-to-install-xrdp-server-remote-desktop.html"><link rel="alternate" type="application/atom+xml" href="https://fachinformatiker.github.io/fachinformatiker.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://fachinformatiker.github.io/fachinformatiker.github.io/feed.json"><meta property="og:title" content="How to Install Xrdp Server (Remote Desktop)"><meta property="og:site_name" content="fachinformatiker.app"><meta property="og:description" content="Neues zum Thema Technik, Medien, etc.
Gerne bringe ich dir auch in meinen Tutorials, schriftlich wie auch audiovisuell, neues bei und erweitere dein Wissen."><meta property="og:url" content="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-install-xrdp-server-remote-desktop.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@psvisualdesign"><meta name="twitter:title" content="How to Install Xrdp Server (Remote Desktop)"><meta name="twitter:description" content="Neues zum Thema Technik, Medien, etc.
Gerne bringe ich dir auch in meinen Tutorials, schriftlich wie auch audiovisuell, neues bei und erweitere dein Wissen."><style>:root {
                --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
                --heading-font: var(--body-font);
                --post-entry-font: var(--body-font);
                --logo-font: var(--body-font);
                --menu-font: var(--body-font)
            }</style><link rel="stylesheet" href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/css/style.css?v=873a5ca0069471e5b0a81f6a9be47718"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-install-xrdp-server-remote-desktop.html"},"headline":"How to Install Xrdp Server (Remote Desktop)","datePublished":"2020-02-03T12:04","dateModified":"2020-05-12T08:44","description":"<p>Xrdp is an open-source implementation of the Microsoft Remote Desktop Protocol (RDP) that allows you to graphically control a remote system. With RDP, you can log in to the remote machine and create a real desktop session the same as if you had logged in to a local machine.</p>\n<p>This tutorial explains how to install and configure Xrdp server on Ubuntu 18.04.<span id=\"ezoic-pub-ad-placeholder-158\" class=\"ezoic-adpicker-ad\"></span></p>\n<p>If you want an open-source solution for remote desktop access, go with VNC.<br />\n","author":{"@type":"Person","name":"Patrick Szalewicz"},"publisher":{"@type":"Organization","name":"Patrick Szalewicz"}}</script><script src="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/js/ls.object-fit.min.js?v=cdedd9262bb7b299d0ebe1deaea5b924"></script><script async src="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/js/lazysizes.min.js?v=d8513e7860f747ccf55c52308943beab"></script></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://fachinformatiker.github.io/fachinformatiker.github.io/">fachinformatiker.app</a></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2020-05-12T09:14">12 May 2020</time></div><div class="infobar__search"><form action="https://fachinformatiker.github.io/fachinformatiker.github.io/search.html"><input type="search" name="q" placeholder=" search..."> <button type="submit" aria-label="Search"><svg width="15px" height="14px"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#search"/></svg></button></form></div></div><main class="main"><article class="post"><header class="u-header post__header"><h1>How to Install Xrdp Server (Remote Desktop)</h1><div class="u-header__meta u-small"><div><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/authors/patrick-szalewicz/" title="Patrick Szalewicz">Patrick Szalewicz</a> <time datetime="2020-02-03T12:04">3 February 2020 </time><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/homelab/" class="u-tag u-tag--1">Homelab</a></div></div></header><div class="post__entry u-inner"><p>Xrdp is an open-source implementation of the Microsoft Remote Desktop Protocol (RDP) that allows you to graphically control a remote system. With RDP, you can log in to the remote machine and create a real desktop session the same as if you had logged in to a local machine.</p><p>This tutorial explains how to install and configure Xrdp server on Ubuntu 18.04.<span id="ezoic-pub-ad-placeholder-158" class="ezoic-adpicker-ad"></span></p><p>If you want an open-source solution for remote desktop access, go with VNC.<br><span id="ezoic-pub-ad-placeholder-138" class="ezoic-adpicker-ad"></span></p><h2 id="installing-desktop-environment">Installing Desktop Environment</h2><p>Generally, Linux servers don't have a desktop environment installed. Our first step is to install X11 and a lightweight desktop environment that will act as a backend for Xrdp.</p><p>There are several desktop environments (DE) available in Ubuntu repositories. We'll be installing <a href="https://xfce.org/">Xfce</a>. It is a fast, stable, and lightweight desktop environment, which makes it ideal for usage on a remote server.<span id="ezoic-pub-ad-placeholder-139" class="ezoic-adpicker-ad"></span></p><p>Type the following commands as a user with sudo privileges to install Xfce on your server:<span id="ezoic-pub-ad-placeholder-156" class="ezoic-adpicker-ad"></span></p><pre class="terminal"><code>sudo apt update</code><code>sudo apt install xfce4 xfce4-goodies xorg dbus-x11 x11-xserver-utils</code></pre><p><span id="ezoic-pub-ad-placeholder-159" class="ezoic-adpicker-ad"></span>Depending on your system, downloading and installing Xfce packages will take some time.<span id="ezoic-pub-ad-placeholder-140" class="ezoic-adpicker-ad"></span></p><h2 id="installing-xrdp">Installing Xrdp</h2><p>Xrdp package is available in the default Ubuntu repositories. To install it, run:</p><pre class="terminal"><code>sudo apt install xrdp </code></pre><p>When the installation process is complete, the Xrdp service will automatically start. You can verify that Xrdp is running by typing:</p><pre class="terminal"><code>sudo systemctl status xrdp</code></pre><p>The output will look something like this:</p><pre><code class="language-output" data-lang="output">● xrdp.service - xrdp daemon
   Loaded: loaded (/lib/systemd/system/xrdp.service; enabled; vendor preset: enabled)
   Active: active (running) since Sun 2019-07-28 22:40:53 UTC; 4min 21s ago
     Docs: man:xrdp(8)
           man:xrdp.ini(5)
  ...
</code></pre><p>By default Xrdp uses the <code>/etc/ssl/private/ssl-cert-snakeoil.key</code> file which is readable only by users that are members of the “ssl-cert” group. Execute the following command to add the <code>xrdp</code> user to the group:</p><pre class="terminal"><code>sudo adduser xrdp ssl-cert  </code></pre><p>That's it. Xrdp has been installed on your Ubuntu server.<span id="ezoic-pub-ad-placeholder-142" class="ezoic-adpicker-ad"></span></p><h2 id="configuring-xrdp">Configuring Xrdp</h2><p>Xrdp configuration files are located in the <code>/etc/xrdp</code> directory. For basic Xrdp connections, you only need to configure Xrdp to use Xfce. To do so open the following file in your text editor:<span id="ezoic-pub-ad-placeholder-160" class="ezoic-adpicker-ad"></span></p><pre class="terminal"><code>sudo nano /etc/xrdp/xrdp.ini</code></pre><p>Add the following line at the end of the file:</p><div class="code-label">/etc/xrdp/xrdp.ini</div><div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">exec startxfce4 </span>
</code></pre><p><span class="code-copy button main small" data-clipboard-text="exec startxfce4 ">Copy</span></p></div><p>Save the file and restart the Xrdp service:</p><pre class="terminal"><code>sudo systemctl restart xrdp</code></pre><h2 id="configuring-firewall">Configuring Firewall</h2><p>By default, Xrdp listens on port <code>3389</code> on all interfaces. If you run a firewall on your Ubuntu server (which you should always do), you’ll need to add a rule that will enable traffic on the Xrdp port.<span id="ezoic-pub-ad-placeholder-143" class="ezoic-adpicker-ad"></span></p><p><span id="ezoic-pub-ad-placeholder-161" class="ezoic-adpicker-ad"></span>To allow access to the Xrdp server from a specific IP address or IP range, in this example <code>192.168.1.0/24</code>, run the following command:</p><pre class="terminal"><code>sudo ufw allow from 192.168.1.0/24 to any port 3389</code></pre><p>If you want to allow access from anywhere (which is highly discouraged for security reasons) run:</p><pre class="terminal"><code>sudo ufw allow 3389</code></pre><p>For increased security, you may consider setting up Xrdp to listen only on localhost and creating an SSH tunnel that securely forwards traffic from your local machine on port <code>3389</code> to the server on the same port. Another secure option is to install OpenVPN and connect to the Xrdp server trough the private network.<span id="ezoic-pub-ad-placeholder-144" class="ezoic-adpicker-ad"></span></p><h2 id="connecting-to-the-xrdp-server">Connecting to the Xrdp Server</h2><p>Now that you have set up your Xrdp server, it is time to open your Xrdp client and connect to the server.</p><p>If you have Windows PC, you can use the default RDP client. Type “remote” in the Windows search bar and click on “Remote Desktop Connection”. This will open up the RDP client. In the computer Field enter the remote server IP address and click “Connect”.<span id="ezoic-pub-ad-placeholder-157" class="ezoic-adpicker-ad"></span></p><figure class="relative"><div class="w-full mx-auto my-0 block relative"><div class="block"></div><div class="w-full h-full absolute inset-0 m-auto overflow-hidden text-center"><figure class="aligncenter size-full wp-image-423"><img class="lazyload" data-src="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/rdp-client.jpg" data-sizes="auto" data-srcset="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-xs.jpg 300w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-sm.jpg 480w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-md.jpg 768w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-lg.jpg 1024w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-xl.jpg 1360w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-client-2xl.jpg 1600w" alt="" data-aspectratio="2.666667" width="800" height="300"></figure></div></div></figure><p>In the login screen enter your username and password and click “OK”.<span id="ezoic-pub-ad-placeholder-145" class="ezoic-adpicker-ad"></span></p><figure class="relative"><div class="w-full mx-auto my-0 block relative"><div class="block"></div><div class="w-full h-full absolute inset-0 m-auto overflow-hidden text-center"><figure class="aligncenter size-full wp-image-424"><img class="lazyload" data-src="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/rdp-login.jpg" data-sizes="auto" data-srcset="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-xs.jpg 300w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-sm.jpg 480w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-md.jpg 768w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-lg.jpg 1024w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-xl.jpg 1360w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/rdp-login-2xl.jpg 1600w" alt="" data-aspectratio="1.600000" width="800" height="500"></figure></div></div></figure><p>Once logged in you should see the default Xfce desktop. It should look something like this:</p><figure class="relative"><div class="w-full mx-auto my-0 block relative"><div class="block"></div><div class="w-full h-full absolute inset-0 m-auto overflow-hidden text-center"><figure class="aligncenter size-full wp-image-425"><img class="lazyload" data-src="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/xrdp-xfce-desktop.jpg" data-sizes="auto" data-srcset="https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-xs.jpg 300w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-sm.jpg 480w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-md.jpg 768w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-lg.jpg 1024w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-xl.jpg 1360w ,https://fachinformatiker.github.io/fachinformatiker.github.io/media/posts/131/responsive/xrdp-xfce-desktop-2xl.jpg 1600w" alt="" data-aspectratio="1.333333" width="1152" height="864"></figure></div></div></figure><p>You can now start interacting with the remote XFCE desktop from your local machine using your keyboard and mouse.</p><p>If you are using macOS, you can install the Microsoft Remote Desktop application from the Mac App Store. Linux users can use an RDP client such as Remmina or Vinagre.</p><h2 id="conclusion">Conclusion</h2><p>Installing an Xrdp server allows you to manage your Ubuntu 18.04 server from your local desktop machine using an easy to use graphic interface.<span id="ezoic-pub-ad-placeholder-146" class="ezoic-adpicker-ad"></span></p><p>If you have questions feel free to leave a comment below.</p></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on 12 May 2020</div><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffachinformatiker.github.io%2Ffachinformatiker.github.io%2Fhow-to-install-xrdp-server-remote-desktop.html" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer" aria-label="Share with Facebook"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Ffachinformatiker.github.io%2Ffachinformatiker.github.io%2Fhow-to-install-xrdp-server-remote-desktop.html&amp;via=psvisualdesign&amp;text=How%20to%20Install%20Xrdp%20Server%20(Remote%20Desktop)" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://wa.me/?text=How%20to%20Install%20Xrdp%20Server%20(Remote%20Desktop) https%3A%2F%2Ffachinformatiker.github.io%2Ffachinformatiker.github.io%2Fhow-to-install-xrdp-server-remote-desktop.html" class="js-share whatsapp" rel="nofollow noopener noreferrer" title="Share with WhatsApp" aria-label="Share with WhatsApp"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#whatsapp"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><div><h4 class="h6"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/authors/patrick-szalewicz/" title="Patrick Szalewicz">Patrick Szalewicz</a></h4></div></div><nav class="post__nav box"><div class="post__nav__prev"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-create-a-sudo-user.html" class="post__nav__link" rel="prev"><div class="u-small">Previous Post<h5>How To Create a Sudo User</h5></div></a></div><div class="post__nav__next"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-install-steam-on-linux.html" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>How to Install Steam on Linux</h5></div></a></div></nav><div class="post__related box"><h3 class="box__title">Related posts</h3><div class="post__related-wrap"><figure class="post__related-item"><figcaption><h4 class="post__related-title"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/setting-up-a-caching-only-dns-server.html" class="inverse">Setting up a Caching-Only DNS Server</a></h4><time datetime="2019-07-11T20:57" class="u-small">11 July 2019</time></figcaption></figure><figure class="post__related-item"><figcaption><h4 class="post__related-title"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-set-up-your-own-private-rtmp-server-using-nginx.html" class="inverse">How to set up your own private RTMP server using nginx</a></h4><time datetime="2019-07-11T20:53" class="u-small">11 July 2019</time></figcaption></figure><figure class="post__related-item"><figcaption><h4 class="post__related-title"><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/how-to-run-a-server-at-home-without-an-ipv4-address.html" class="inverse">How To Run A Server At Home Without An IPv4 Address</a></h4><time datetime="2019-06-02T13:40" class="u-small">2 June 2019</time></figcaption></figure></div></div></footer></article></main><div class="sidebar"><section class="box"><h3 class="box__title">Follow us</h3><div class="follow"><a href="twitter.com/psvisualdesign" class="twitter" aria-label="Twitter"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#twitter"/></svg> Twitter </a><a href="instagram.com/psvisualdesign" class="instagram" aria-label="Instagram"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#instagram"/></svg> Instagram </a><a href="youtube.com/psvisualdesign" class="youtube" aria-label="Youtube"><svg class="u-icon"><use xlink:href="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/svg/svg-map.svg#youtube"/></svg> Youtube</a></div></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/github/">GitHub</a> <span class="u-small">(3)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/homelab/">Homelab</a> <span class="u-small">(25)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/infos/">Infos</a> <span class="u-small">(6)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/java/">Java</a> <span class="u-small">(2)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/linux/">Linux</a> <span class="u-small">(43)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/lost-place/">Lost Place</a> <span class="u-small">(2)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/networking/">Networking</a> <span class="u-small">(10)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/photography/">Photography</a> <span class="u-small">(5)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/private/">Private</a> <span class="u-small">(4)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/projects/">Projects</a> <span class="u-small">(11)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/random/">Random</a> <span class="u-small">(1)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/raspberry-pi/">Raspberry Pi</a> <span class="u-small">(37)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/repost/">Repost</a> <span class="u-small">(2)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/review/">Review</a> <span class="u-small">(2)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/security/">Security</a> <span class="u-small">(10)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/server/">Server</a> <span class="u-small">(26)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/tutorials/">Tutorials</a> <span class="u-small">(45)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/unboxing/">Unboxing</a> <span class="u-small">(2)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/usefull/">Usefull</a> <span class="u-small">(8)</span></li><li><a href="https://fachinformatiker.github.io/fachinformatiker.github.io/videography/">Videography</a> <span class="u-small">(2)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://fachinformatiker.github.io/fachinformatiker.github.io/">fachinformatiker.app</a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii Static CMS</a></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://fachinformatiker.github.io/fachinformatiker.github.io/assets/js/scripts.min.js?v=225cfb4a7e546edee710c4f1208e81e2"></script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>This website uses cookies</h2><p>Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified">More details...</a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label> <input id="gdpr-functions" name="gdpr-functions" type="checkbox"> <label for="gdpr-functions">Functionality</label> <input id="gdpr-analytics" name="gdpr-analytics" type="checkbox"> <label for="gdpr-analytics">Analytical</label> <input id="gdpr-marketing" name="gdpr-marketing" type="checkbox"> <label for="gdpr-marketing">Marketing</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Save</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                        }
                    }
                }
            })();</script></body></html>